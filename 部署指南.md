# 🚀 餐饮分析平台部署指南

## 🌐 部署选项概览

### 1. **免费云部署（推荐）**
- **前端**: Vercel（免费、快速、全球CDN）
- **后端**: Render（免费套餐、自动部署）
- **数据库**: SQLite（内置，无需额外配置）

### 2. **局域网部署**
- 同一网络内的其他电脑可访问
- 需要配置防火墙

### 3. **内网穿透**
- 使用ngrok等工具
- 临时外网访问

## 🎯 方案一：Vercel + Render 部署（推荐）

### 步骤1：部署后端到Render

1. **注册Render账户**
   - 访问 [render.com](https://render.com)
   - 使用GitHub账户登录

2. **创建新服务**
   - 点击 "New +" → "Web Service"
   - 连接您的GitHub仓库

3. **配置服务**
   ```
   Name: restaurant-analytics-backend
   Environment: Node
   Build Command: cd server && npm install
   Start Command: cd server && node index.js
   ```

4. **设置环境变量**
   ```
   OPENAI_API_KEY=your_actual_openai_api_key
   PORT=10000
   NODE_ENV=production
   ```

5. **部署完成后，复制URL**
   - 例如：`https://restaurant-analytics-backend.onrender.com`

### 步骤2：部署前端到Vercel

1. **注册Vercel账户**
   - 访问 [vercel.com](https://vercel.com)
   - 使用GitHub账户登录

2. **导入项目**
   - 点击 "New Project"
   - 选择您的GitHub仓库

3. **配置构建**
   ```
   Framework Preset: Create React App
   Build Command: npm run build
   Output Directory: client/build
   Install Command: npm run install-all
   ```

4. **设置环境变量**
   ```
   REACT_APP_API_URL=https://your-backend-url.onrender.com
   ```

5. **部署完成后，获得访问链接**
   - 例如：`https://restaurant-analytics.vercel.app`

## 🏠 方案二：局域网部署

### 步骤1：获取本机IP地址
```bash
# macOS/Linux
ifconfig | grep "inet " | grep -v 127.0.0.1

# Windows
ipconfig | findstr "IPv4"
```

### 步骤2：修改前端配置
```javascript
// client/src/config/api.js
const API_CONFIG = {
  development: 'http://localhost:5001',
  production: 'http://YOUR_IP_ADDRESS:5001'  // 替换为您的IP
};
```

### 步骤3：启动服务
```bash
# 启动后端（允许外部访问）
cd server
PORT=5001 HOST=0.0.0.0 node index.js

# 启动前端
cd client
npm start
```

### 步骤4：其他电脑访问
- 在浏览器中输入：`http://YOUR_IP_ADDRESS:3000`

## 🌍 方案三：内网穿透（临时外网访问）

### 使用ngrok

1. **安装ngrok**
   ```bash
   # macOS
   brew install ngrok
   
   # 或下载安装包
   # https://ngrok.com/download
   ```

2. **启动隧道**
   ```bash
   # 前端隧道
   ngrok http 3000
   
   # 后端隧道
   ngrok http 5001
   ```

3. **获得临时链接**
   - 前端：`https://abc123.ngrok.io`
   - 后端：`https://def456.ngrok.io`

## 📱 部署后的访问方式

### 1. **云部署**
- ✅ 全球任何地方都可以访问
- ✅ 自动HTTPS加密
- ✅ 无需配置防火墙
- ✅ 24/7在线

### 2. **局域网部署**
- ✅ 同一网络内快速访问
- ✅ 数据安全性高
- ❌ 需要配置防火墙
- ❌ 外网无法访问

### 3. **内网穿透**
- ✅ 临时外网访问
- ❌ 链接会变化
- ❌ 免费版有限制

## 🔧 部署后配置

### 1. **更新API地址**
部署完成后，更新 `client/src/config/api.js` 中的生产环境API地址。

### 2. **环境变量配置**
确保生产环境的环境变量正确设置。

### 3. **域名配置（可选）**
- Vercel支持自定义域名
- Render支持自定义域名（付费功能）

## 🚨 注意事项

### 1. **安全性**
- 生产环境不要暴露敏感信息
- 使用HTTPS协议
- 定期更新依赖包

### 2. **性能优化**
- 启用Gzip压缩
- 使用CDN加速
- 数据库连接池优化

### 3. **监控**
- 设置错误监控
- 性能监控
- 访问日志

## 📞 技术支持

如果部署过程中遇到问题：
1. 检查控制台错误信息
2. 验证环境变量配置
3. 确认端口没有被占用
4. 检查防火墙设置

## 🎉 部署完成

部署成功后，您将获得：
- 🌐 全球可访问的网站链接
- 📱 响应式设计，支持各种设备
- 🔒 安全的HTTPS连接
- ⚡ 快速的全球CDN加速

现在任何人都可以通过链接访问您的餐饮分析平台了！
