// å›½é™…åŒ–é…ç½®
export const translations = {
  zh: {
    // é€šç”¨
    loading: 'åŠ è½½ä¸­...',
    submit: 'æäº¤',
    cancel: 'å–æ¶ˆ',
    confirm: 'ç¡®è®¤',
    back: 'è¿”å›',
    refresh: 'åˆ·æ–°',
    download: 'ä¸‹è½½',
    upload: 'ä¸Šä¼ ',
    success: 'æˆåŠŸ',
    error: 'é”™è¯¯',
    warning: 'è­¦å‘Š',
    
    // å¯¼èˆª
    dataInput: 'æ•°æ®è¾“å…¥',
    analysisResults: 'åˆ†æç»“æœ',
    platformTitle: 'ğŸ½ï¸ é¤é¥®åˆ†æå¹³å°',
    
    // æ•°æ®è¾“å…¥é¡µé¢
    monthlyDataInput: 'æœˆåº¦æ•°æ®è¾“å…¥',
    inputDescription: 'è¯·è¾“å…¥12ä¸ªæœˆçš„ç»è¥æ•°æ®ï¼ˆå•ä½ï¼šä¸‡å…ƒï¼‰',
    originalFood: 'åŸå§‹é£Ÿå“',
    organicFood: 'æœ‰æœºé£Ÿå“',
    revenue: 'è¥ä¸šé¢',
    cost: 'æˆæœ¬',
    profit: 'åˆ©æ¶¦',
    month: 'æœˆ',
    submitDataAndAnalyze: 'æäº¤æ•°æ®å¹¶åˆ†æ',
    dataValidationPassed: 'æ•°æ®éªŒè¯é€šè¿‡',
    dataValidationFailed: 'æ•°æ®éªŒè¯å¤±è´¥',
    dataSubmittedSuccessfully: 'æ•°æ®æäº¤æˆåŠŸï¼æ­£åœ¨è·³è½¬åˆ°åˆ†æé¡µé¢...',
    dataSubmissionFailed: 'æ•°æ®æäº¤å¤±è´¥',
    pleaseEnterValidNumber: 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ­£æ•°',
    pleaseEnterValue: 'è¯·è¾“å…¥æ•°å€¼',
    monthLabel: 'æœˆ',
    
    // ExcelåŠŸèƒ½
    importExcel: 'å¯¼å…¥Excel',
    exportExcel: 'å¯¼å‡ºExcel',
    downloadTemplate: 'ä¸‹è½½ç©ºç™½æ¨¡æ¿',
    downloadTemplateTooltip: 'ä¸‹è½½Excelå¯¼å…¥æ¨¡æ¿ï¼ˆç©ºç™½æ¨¡æ¿ï¼‰',
    excelFormatDescription: 'ğŸ“‹ Excelæ ¼å¼è¯´æ˜ï¼š',
    excelFormatRules: [
      'ç¬¬ä¸€è¡Œä¸ºæ ‡é¢˜è¡Œï¼ˆæœˆä»½ã€åŸå§‹é£Ÿå“è¥ä¸šé¢ã€åŸå§‹é£Ÿå“æˆæœ¬ç­‰ï¼‰',
      'ç¬¬2-13è¡Œä¸º1-12æœˆçš„æ•°æ®ï¼ˆç©ºç™½æ¨¡æ¿å·²é¢„ç½®æœˆä»½ï¼‰',
      'æ‰€æœ‰æ•°å€¼å¿…é¡»ä¸ºéè´Ÿæ•°',
      'æ”¯æŒ.xlsxå’Œ.xlsæ ¼å¼',
      'ä¸‹è½½çš„æ¨¡æ¿ä¸ºç©ºç™½æ¨¡æ¿ï¼Œä¸åŒ…å«ç¤ºä¾‹æ•°æ®'
    ],
    templateGeneratedSuccessfully: 'Excelæ¨¡æ¿æ–‡ä»¶ç”ŸæˆæˆåŠŸï¼',
    dataImportedSuccessfully: 'æ•°æ®å¯¼å…¥æˆåŠŸï¼',
    dataImportFailed: 'æ•°æ®å¯¼å…¥å¤±è´¥',
    
    // åˆ†æé¡µé¢
    restaurantAnnualAnalysis: 'é¤é¥®å¹´åº¦æ•°æ®åˆ†æ',
    comprehensiveBusinessAnalysis: 'ç»¼åˆå•†ä¸šåˆ†ææŠ¥å‘Š',
    annualSummary: 'å¹´åº¦æ±‡æ€»',
    comparisonAnalysis: 'å¯¹æ¯”åˆ†æ',
    originalFoodTotal: 'åŸå§‹é£Ÿå“æ€»è®¡',
    organicFoodTotal: 'æœ‰æœºé£Ÿå“æ€»è®¡',
    totalRevenue: 'æ€»è¥ä¸šé¢',
    totalCost: 'æ€»æˆæœ¬',
    totalProfit: 'æ€»åˆ©æ¶¦',
    growthRate: 'å¢é•¿ç‡',
    costRatio: 'æˆæœ¬ç‡',
    profitMargin: 'åˆ©æ¶¦ç‡',
    absoluteDifference: 'ç»å¯¹å·®å€¼',
    percentage: 'ç™¾åˆ†æ¯”',
    millionYuan: 'ä¸‡å…ƒ',
    vsLastYear: 'åŒæ¯”',
    
    // å›¾è¡¨æ ‡é¢˜
    monthlyRevenueComparison: 'æœˆåº¦æ”¶å…¥å¯¹æ¯”',
    annualDataComparison: 'å¹´åº¦æ•°æ®å¯¹æ¯”',
    profitTrendAnalysis: 'åˆ©æ¶¦è¶‹åŠ¿åˆ†æ',
    profitAnalysis: 'åˆ©æ¶¦åˆ†æ',
    costStructureAnalysis: 'æˆæœ¬ç»“æ„åˆ†æ',
    seasonalPatternAnalysis: 'å­£èŠ‚æ€§æ¨¡å¼åˆ†æ',
    profitMarginTrendAnalysis: 'ç›ˆåˆ©èƒ½åŠ›æ ¸å¿ƒæŒ‡æ ‡',
    costStructureChange: 'è¿è¥æ•ˆç‡åˆ†æ',
    cashFlowAnalysis: 'è´¢åŠ¡å¥åº·çŠ¶å†µ',
    seasonalAnalysisChart: 'å­£èŠ‚æ€§åˆ†æä¸è¶‹åŠ¿é¢„æµ‹',
    revenueTrendAnalysis: 'æ”¶å…¥è¶‹åŠ¿åˆ†æ',
    revenueTrendAndSeasonality: 'æ”¶å…¥è¶‹åŠ¿ä¸å­£èŠ‚æ€§',
    seasonalIndex: 'å­£èŠ‚æ€§æŒ‡æ•°',
    trendLine: 'è¶‹åŠ¿çº¿',

    // å­£èŠ‚æ€§åˆ†æ
    peakSeason: 'æ—ºå­£',
    offSeason: 'æ·¡å­£',
    seasonalStrength: 'å­£èŠ‚æ€§å¼ºåº¦',
    seasonalPattern: 'å­£èŠ‚æ€§æ¨¡å¼',
    seasonalAnalysisResults: 'å­£èŠ‚æ€§åˆ†æç»“æœ',
    
    // ç»Ÿè®¡ä¿¡æ¯
    average: 'å¹³å‡å€¼',
    maximum: 'æœ€å¤§å€¼',
    minimum: 'æœ€å°å€¼',
    revenueStatistics: 'æ”¶å…¥ç»Ÿè®¡',
    profitStatistics: 'åˆ©æ¶¦ç»Ÿè®¡',
    costStatistics: 'æˆæœ¬ç»Ÿè®¡',
    
    // AIå»ºè®®
    aiAdvice: 'AIæ™ºèƒ½å»ºè®®',
    getAiAdvice: 'è·å–AIå»ºè®®',
    regenerateAdvice: 'é‡æ–°ç”Ÿæˆå»ºè®®',
    aiAnalysisCompleted: 'AIåˆ†æå®Œæˆï¼',
    aiAnalysisFailed: 'AIåˆ†æå¤±è´¥',
    aiAdviceGenerated: 'AIå»ºè®®ç”ŸæˆæˆåŠŸ',
    aiAdviceFailed: 'AIå»ºè®®ç”Ÿæˆå¤±è´¥',
    noDataForAI: 'æ²¡æœ‰æ•°æ®å¯ä¾›AIåˆ†æ',
    mockAdvice: 'åŸºäºæ‚¨çš„æ•°æ®åˆ†æï¼Œæˆ‘ä»¬æä¾›ä»¥ä¸‹å»ºè®®ï¼š',
    
    // ä¿æŠ¤é¡µé¢
    noAnalysisData: 'è¿˜æ²¡æœ‰åˆ†ææ•°æ®ï¼Œè¯·å…ˆè¾“å…¥æ‚¨çš„ç»è¥æ•°æ®',
    pleaseInputDataFirst: 'è¯·å…ˆè¾“å…¥æ•°æ®',
    goToDataInput: 'å‰å¾€æ•°æ®è¾“å…¥',
    loadDataFailed: 'æ•°æ®åŠ è½½å¤±è´¥',
    usageSteps: 'ğŸ¯ ä½¿ç”¨æ­¥éª¤',
    usageStepsList: [
      'ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è¿›å…¥æ•°æ®è¾“å…¥é¡µé¢',
      'è¾“å…¥12ä¸ªæœˆçš„ç»è¥æ•°æ®ï¼ˆè¥ä¸šé¢ã€æˆæœ¬ã€åˆ©æ¶¦ï¼‰',
      'æ”¯æŒåŸå§‹é£Ÿå“å’Œæœ‰æœºé£Ÿå“ä¸¤ç§ç±»å‹',
      'å¯ä»¥æ‰‹åŠ¨è¾“å…¥æˆ–å¯¼å…¥Excelæ–‡ä»¶',
      'æäº¤æ•°æ®åæŸ¥çœ‹åˆ†æç»“æœ'
    ],
    startInputData: 'å¼€å§‹è¾“å…¥æ•°æ®',
    refreshPage: 'åˆ·æ–°é¡µé¢',
    
    // é”™è¯¯æ¶ˆæ¯
    dataLoadingFailed: 'æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·é‡æ–°æäº¤æ•°æ®',
    
    // æœˆä»½åç§°
    months: [
      '1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ',
      '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'
    ],
    
    // æ•°å­—æ ¼å¼åŒ–
    formatNumber: (num) => {
      const number = parseFloat(num);
      if (isNaN(number)) {
        return '0.0';
      }
      if (number >= 10000) {
        return (number / 10000).toFixed(1) + 'ä¸‡';
      }
      return number.toFixed(1);
    },
    
    // æ•°å­—æ ¼å¼åŒ–ï¼ˆè¿”å›æ•°å­—ï¼Œç”¨äºå›¾è¡¨ï¼‰
    formatNumberForChart: (num) => {
      const number = parseFloat(num);
      if (isNaN(number)) {
        return 0;
      }
      return number;
    }
  },
  
  en: {
    // Common
    loading: 'Loading...',
    submit: 'Submit',
    cancel: 'Cancel',
    confirm: 'Confirm',
    back: 'Back',
    refresh: 'Refresh',
    download: 'Download',
    upload: 'Upload',
    success: 'Success',
    error: 'Error',
    warning: 'Warning',
    
    // Navigation
    dataInput: 'Data Input',
    analysisResults: 'Analysis Results',
    platformTitle: 'ğŸ½ï¸ Restaurant Analytics Platform',
    
    // Data Input Page
    monthlyDataInput: 'Monthly Data Input',
    inputDescription: 'Please enter 12 months of business data (unit: 10K CNY)',
    originalFood: 'Original Food',
    organicFood: 'Organic Food',
    revenue: 'Revenue',
    cost: 'Cost',
    profit: 'Profit',
    month: 'Month',
    submitDataAndAnalyze: 'Submit Data & Analyze',
    dataValidationPassed: 'Data validation passed',
    dataValidationFailed: 'Data validation failed',
    dataSubmittedSuccessfully: 'Data submitted successfully! Redirecting to analysis page...',
    dataSubmissionFailed: 'Data submission failed',
    pleaseEnterValidNumber: 'Please enter a valid positive number',
    pleaseEnterValue: 'Please enter a value',
    monthLabel: 'Month',
    
    // Excel Features
    importExcel: 'Import Excel',
    exportExcel: 'Export Excel',
    downloadTemplate: 'Download Template',
    downloadTemplateTooltip: 'Download Excel import template (blank template)',
    excelFormatDescription: 'ğŸ“‹ Excel Format Instructions:',
    excelFormatRules: [
      'First row contains headers (Month, Original Food Revenue, Original Food Cost, etc.)',
      'Rows 2-13 contain data for months 1-12 (blank template has pre-filled months)',
      'All values must be non-negative numbers',
      'Supports .xlsx and .xls formats',
      'Downloaded template is blank, no sample data included'
    ],
    templateGeneratedSuccessfully: 'Excel template generated successfully!',
    dataImportedSuccessfully: 'Data imported successfully!',
    dataImportFailed: 'Data import failed',
    
    // Analysis Page
    restaurantAnnualAnalysis: 'Restaurant Annual Data Analysis',
    comprehensiveBusinessAnalysis: 'Comprehensive Business Analysis Report',
    annualSummary: 'Annual Summary',
    comparisonAnalysis: 'Comparison Analysis',
    originalFoodTotal: 'Original Food Total',
    organicFoodTotal: 'Organic Food Total',
    totalRevenue: 'Total Revenue',
    totalCost: 'Total Cost',
    totalProfit: 'Total Profit',
    growthRate: 'Growth Rate',
    costRatio: 'Cost Ratio',
    profitMargin: 'Profit Margin',
    absoluteDifference: 'Absolute Difference',
    percentage: 'Percentage',
    millionYuan: '10K CNY',
    vsLastYear: 'vs Last Year',
    
    // Chart Titles
    monthlyRevenueComparison: 'Monthly Revenue Comparison',
    annualDataComparison: 'Annual Data Comparison',
    profitTrendAnalysis: 'Profit Trend Analysis',
    profitAnalysis: 'Profit Analysis',
    costStructureAnalysis: 'Cost Structure Analysis',
    seasonalPatternAnalysis: 'Seasonal Pattern Analysis',
    profitMarginTrendAnalysis: 'Profitability Core Indicators',
    costStructureChange: 'Operational Efficiency Analysis',
    cashFlowAnalysis: 'Financial Health Status',
    seasonalAnalysisChart: 'Seasonal Analysis & Trend Prediction',
    revenueTrendAnalysis: 'Revenue Trend Analysis',
    revenueTrendAndSeasonality: 'Revenue Trend & Seasonality',
    seasonalIndex: 'Seasonal Index',
    trendLine: 'Trend Line',

    // Seasonal Analysis
    peakSeason: 'Peak Season',
    offSeason: 'Off Season',
    seasonalStrength: 'Seasonal Strength',
    seasonalPattern: 'Seasonal Pattern',
    seasonalAnalysisResults: 'Seasonal Analysis Results',
    
    // Statistics
    average: 'Average',
    maximum: 'Maximum',
    minimum: 'Minimum',
    revenueStatistics: 'Revenue Statistics',
    profitStatistics: 'Profit Statistics',
    costStatistics: 'Cost Statistics',
    
    // AI Advice
    aiAdvice: 'AI Intelligent Advice',
    getAiAdvice: 'Get AI Advice',
    regenerateAdvice: 'Regenerate Advice',
    aiAnalysisCompleted: 'AI analysis completed!',
    aiAnalysisFailed: 'AI analysis failed',
    aiAdviceGenerated: 'AI advice generated successfully',
    aiAdviceFailed: 'AI advice generation failed',
    noDataForAI: 'No data available for AI analysis',
    mockAdvice: 'Based on your data analysis, we provide the following recommendations:',
    
    // Protection Page
    noAnalysisData: 'No analysis data available. Please input your business data first.',
    pleaseInputDataFirst: 'Please input data first',
    goToDataInput: 'Go to Data Input',
    loadDataFailed: 'Data loading failed',
    usageSteps: 'ğŸ¯ Usage Steps',
    usageStepsList: [
      'Click the button below to enter the data input page',
      'Enter 12 months of business data (revenue, cost, profit)',
      'Supports both original food and organic food types',
      'You can input manually or import Excel files',
      'Submit data to view analysis results'
    ],
    startInputData: 'Start Input Data',
    refreshPage: 'Refresh Page',
    
    // Error Messages
    dataLoadingFailed: 'Data loading failed, please resubmit data',
    
    // Month Names
    months: [
      'January', 'February', 'March', 'April', 'May', 'June',
      'July', 'August', 'September', 'October', 'November', 'December'
    ],
    
    // Number formatting
    formatNumber: (num) => {
      const number = parseFloat(num);
      if (isNaN(number)) {
        return '0.0';
      }
      if (number >= 10000) {
        return (number / 10000).toFixed(1) + 'K';
      }
      return number.toFixed(1);
    },

    // Number formatting for charts (returns number)
    formatNumberForChart: (num) => {
      const number = parseFloat(num);
      if (isNaN(number)) {
        return 0;
      }
      return number;
    }
  }
};

// è®¾ç½®è¯­è¨€
export const setLanguage = (language) => {
  localStorage.setItem('language', language);
  window.location.reload(); // é‡æ–°åŠ è½½é¡µé¢ä»¥åº”ç”¨æ–°è¯­è¨€
};

// è·å–å½“å‰è¯­è¨€
export const getCurrentLanguage = () => {
  return localStorage.getItem('language') || 'en';
};

// ç¿»è¯‘å‡½æ•°
export const t = (key, params = {}) => {
  const currentLang = getCurrentLanguage();
  const langData = translations[currentLang];
  
  // æ”¯æŒåµŒå¥—é”®ï¼Œå¦‚ 'comparison.revenueGrowthRate'
  const keys = key.split('.');
  let value = langData;
  
  for (const k of keys) {
    if (value && typeof value === 'object' && k in value) {
      value = value[k];
    } else {
      console.warn(`Translation key not found: ${key} in ${currentLang}`);
      return key; // è¿”å›é”®åä½œä¸ºåå¤‡
    }
  }
  
  // å¦‚æœå€¼æ˜¯å‡½æ•°ï¼Œè°ƒç”¨å®ƒå¹¶ä¼ é€’å‚æ•°
  if (typeof value === 'function') {
    return value(params);
  }
  
  return value;
};
